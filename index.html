<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" href="styles.css">

<head>
<title>OSV-5M</title>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<link rel="icon" type="image/png" href="favicon.png">
</head>

<body>

<h1>OpenStreetView-5M <br><sub style="margin-top: -2em; margin-bottom: -0.1em">The Many Roads to Global Visual Geolocation</sub></h1>
<center>
  <div class="authors">
    <a href="https://imagine-lab.enpc.fr/staff-members/guillaume-astruc/">Guillaume&nbspAstruc*</a><sup>1,2</sup>
    <a href="https://nicolas-dufour.github.io/">Nicolas&nbspDufour*</a><sup>1,3</sup>,
    <a href="https://imagine.enpc.fr/~siglidii/">Ioannis&nbspSiglidis*</a><sup>1</sup>,<br/>
    <div class="second">
    Constantin&nbspAronssohn<sup>1</sup>, Nacim&nbspBouia, <a href="https://stephanie-fu.github.io/">Stephanie&nbspFu</a><sup>1,4</sup>,
    <a href="https://romainloiseau.fr/">Romain&nbspLoiseau</a><sup>1,2</sup>,
    <a href="https://nv-nguyen.github.io/">Van&nbspNguyen&nbspNguyen</a><sup>1</sup>,
    <a href="https://imagine.enpc.fr/~raudec/">Charles&nbspRaude</a><sup>1</sup>,
    <a href="https://imagine.enpc.fr/~vincente/">Elliot&nbspVincent</a><sup>1,3</sup>,
    Lintao&nbspXU<sup>1</sup>, Hongyu&nbspZhou<sup>1</sup>,
    <a href="https://loiclandrieu.com/">Loic&nbspLandrieu<sup>1</sup></a></div>
  </div>
</center>

<div class="unis">
<center>* denotes equal contribution<br><sup>1</sup>LIGM,&nbspEcole&nbspdes&nbspPonts,&nbspUniv&nbspGustave&nbspEiffel,&nbspCNRS
<sup>2</sup>Univ&nbspGustave&nbspEiffel,&nbspIGN,&nbspENSG,&nbspLASTIG
<sup>3</sup>Inria&nbspParis
<sup>4</sup>UC&nbspBerkeley
<sup>5</sup>CESBIO,&nbspUniv&nbspde&nbspToulouse,&nbspCNES/CNRS/IRD/INRAE/UPS
<sup>6</sup>LIX,&nbspCNRS,&nbspEcole&nbspPolytechnique,&nbspIP&nbspParis
</center>
</div>

<div class="cvpr" style="margin-top: -0.6em; margin-bottom: 2.em"><h2>CVPR 2024 (Poster)</h2></div>
<div class="publication-links">
  <span class="link-block">
    <a href="cvpr-static.pdf" class="external-link button is-normal is-rounded is-dark">
      <span class="icon">
        <i class="fa-regular fa-file-lines" style="margin-right: 0.5rem;"></i> Pdf
      </span>
    </a>
  </span>

  <span class="link-block">
    <a href="https://arxiv.org/abs/2404.18873" class="external-link button is-normal is-rounded is-dark">
      <span class="icon">
        <i class="ai ai-arxiv"></i> Arxiv
      </span>
    </a>
  </span>

  <span class="link-block">
    <a href="https://huggingface.co/datasets/osv5m/osv5m" class="external-link button is-normal is-rounded is-dark">
      <span class="icon">
        <i class="fa-solid fa-database" style="margin-right: 0.5rem;"></i> Data
      </span>
    </a>
  </span>

  <span class="link-block">
    <a href="https://github.com/gastruc/osv5m" class="external-link button is-normal is-rounded is-dark">
      <span class="icon">
        <i class="fa-brands fa-github" style="margin-right: 0.5rem;"></i> Code
      </span>
    </a>
  </span>

  <span class="link-block">
    <a href="https://osv5m-plonk.hf.space" class="external-link button is-normal is-rounded is-dark">
      <span class="icon">
          <i class="fa-solid fa-location-dot" style="margin-right: 0.5rem;"></i> Play
      </span>
    </a>
  </span>
</div>

<div class="image-container">
  <img src="media/teaser.png" alt="Teaser figure showing that OSV5M sits in a good are of localizability for a good and reliable dataset." style="margin-top: 0.6em;">
</div>

<h2 style="margin-top: 1em;">Abstract</h2>
<div class="text">
Determining the location of an image anywhere on Earth is a complex visual task, which makes it particularly relevant for evaluating computer vision algorithms.
Yet, the absence of standard, large-scale, open-access datasets with reliably <strong>localizable</strong> images has limited its potential.
To address this issue, we introduce OpenStreetView-5M, a large-scale, open-access dataset comprising over <strong>5.1 million</strong> geo-referenced street view images, covering 225 countries and territories.
In contrast to existing benchmarks, we enforce a strict train/test separation, allowing us to evaluate the relevance of learned geographical features beyond mere memorization.
To demonstrate the utility of our dataset, we conduct an extensive benchmark of various state-of-the-art image encoders, spatial representations, and training strategies.
</div>

<h2 style="margin-top: 1em;">Dataset</h2>

<div id="carouselExampleDark" class="carousel slide" style="margin-bottom: 2em;">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="3" aria-label="Slide 4"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="4" aria-label="Slide 5"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="5" aria-label="Slide 6"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="6" aria-label="Slide 7"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="7" aria-label="Slide 8"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="8" aria-label="Slide 9"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="9" aria-label="Slide 10"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="10" aria-label="Slide 11"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="11" aria-label="Slide 12"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="12" aria-label="Slide 13"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="13" aria-label="Slide 14"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="14" aria-label="Slide 15"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active" data-bs-interval="10000">
      <img src="images/1113744692540897.jpg" class="d-block w-100" alt="Image from Brasil, from user tulliomf">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>tulliomf (Brasil)</p>
      </div>
    </div>
    <div class="carousel-item" data-bs-interval="2000">
      <img src="images/1139006019900435.jpg" class="d-block w-100" alt="Image from Mali, from user kosanka">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>kosanka (Mali)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/1207955469639614.jpg" class="d-block w-100" alt="Image from Indonesia, from user benjidad">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>benjidad (Indonesia)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/137033365014320.jpg" class="d-block w-100" alt="Image from Indonesia, from user arizalkawamuna">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>arizalkawamuna (Indonesia)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/1622455258212885.jpg" class="d-block w-100" alt="Image from Pakistan, from user plannerqadeer for City Pulse">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>plannerqadeer for City Pulse (Pakistan)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/210429954039398.jpg" class="d-block w-100" alt="Image from Chile, from user sedicla">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>sedicla (Chile)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/217887346522004.jpg" class="d-block w-100" alt="Image from Kazakstan, from user vik1607">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>vik1607 (Kazakstan)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/2872700852992867.jpg" class="d-block w-100" alt="Image from China, from user mapillario">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>mapillario (China)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/320105979491109.jpg" class="d-block w-100" alt="Image from Sweden, from user kmajcher for Here">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>kmajcher for Here (Sweden)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/3882682481821500.jpg" class="d-block w-100" alt="Image from Oman, from user vbombaerts">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>vbombaerts (Oman)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/464804747946887.jpg" class="d-block w-100" alt="Image from Japan, from user caesium">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>caesium (Japan)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/474519253765020.jpg" class="d-block w-100" alt="Image from New Zealand, from user 3stripes">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>3stripes (New Zealand)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/517681129360654.jpg" class="d-block w-100" alt="Image from England, from user themadcabbie">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>themadcabbie (England)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/827026111505364.jpg" class="d-block w-100" alt="Image from Utah, from user canadarunner">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>canadarunner (Utah)</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="images/975112963027888.jpg" class="d-block w-100" alt="Image from Australia, from user weinshaum">
      <div class="carousel-caption d-none d-md-block" style="color: white;">
        <p>weinshaum (Australia)</p>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true" style="color: white;"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true" style="color: white;"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<div class="text" style="margin-top: 2em; margin-bottom: 2em;">
  Our dataset offers a wide variety of images, from urban to rural areas, well distributed across the globe.
  We especially curate our dataset to fit as close as possible the real global spatial population density, with a priority on the test set.
  We enforce a train and test spatial separation (1km) and keep only one image per capture sequence.
  This means that the network cannot simply rely on memorizing places in order to geolocate images, but has to learn geographical features that represent countries and regions. 
</div>

<div id="carousel2" class="carousel carousel-dark slide" style="margin-bottom: 2em;">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carousel2" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carousel2" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carousel2" data-bs-slide-to="2" aria-label="Slide 3"></button>
    <button type="button" data-bs-target="#carousel2" data-bs-slide-to="3" aria-label="Slide 4"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active" data-bs-interval="10000">
      <img src="figures/train-density.png" alt="train density" class="d-block w-100">
      <div class="carousel-caption d-none d-md-block">
        <p>Train Density</p>
      </div>
    </div>
    <div class="carousel-item" data-bs-interval="2000">
      <img src="figures/train-distribution.png" class="d-block w-100" alt="train distribution">
      <div class="carousel-caption d-none d-md-block">
        <p>Train Distribution</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="figures/test-density.png" class="d-block w-100" alt="test density">
      <div class="carousel-caption d-none d-md-block">
        <p>Test Density</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="figures/test-distribution.png" class="d-block w-100" alt="test distribution">
      <div class="carousel-caption d-none d-md-block">
        <p>Test Distribution</p>
      </div>
   </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carousel2" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carousel2" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<h2>Benchmark</h2>
<div class="image-container" style="margin-bottom: 1em;">
  <img src="media/benchmark.png" alt="Description of the image">
  <div class="caption">    
  </div>
</div>

<div class="text" style="margin-top: 2em; margin-bottom: 2em;">
  We benchmark various state-of-the-art image encoders, output representations, training losses, and parameter finetuning strategies on our dataset. 
  By selecting the best performing components from each step, we propose a strong baseline for visual geolocation on OSV-5M.
</div>

<div id="carousel3" class="carousel carousel-dark slide" style="margin-bottom: 2em;">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carousel3" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carousel3" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carousel3" data-bs-slide-to="2" aria-label="Slide 3"></button>
    <button type="button" data-bs-target="#carousel3" data-bs-slide-to="3" aria-label="Slide 4"></button>
    <button type="button" data-bs-target="#carousel3" data-bs-slide-to="4" aria-label="Slide 5"></button>
    <button type="button" data-bs-target="#carousel3" data-bs-slide-to="5" aria-label="Slide 6"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active" data-bs-interval="10000">
      <img src="figures/backbone.png" alt="backbone" class="d-block w-100">
      <div class="carousel-caption d-none d-md-block">
        <p>Backbone</p>
      </div>
    </div>
    <div class="carousel-item" data-bs-interval="2000">
      <img src="figures/optimization.png" class="d-block w-100" alt=Finetuning">
      <div class="carousel-caption d-none d-md-block">
        <p>Finetuning</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="figures/prediction-head.png" class="d-block w-100" alt="prediction head">
      <div class="carousel-caption d-none d-md-block">
        <p>Prediction Head</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="figures/contrastive.png" class="d-block w-100" alt="contrastive">
      <div class="carousel-caption d-none d-md-block">
        <p>Contrastive</p>
      </div>
   </div>
   <div class="carousel-item">
    <img src="figures/error-map.png" class="d-block w-100" alt="error map">
    <div class="carousel-caption d-none d-md-block">
      <p>Error Map</p>
    </div>
   </div>
   <div class="carousel-item">
    <img src="figures/error-dist.png" class="d-block w-100" alt="error distribution">
    <div class="carousel-caption d-none d-md-block">
      <p>Error Distribution</p>
    </div>
   </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carousel3" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carousel3" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<h3 style="margin-top: 1em;">Key Takeaways</h3>
<div class="text" style="text-align: left;">
<ul>
<li><b>Backbone:</b> Pretraining with the correct data can lead to the same performance as significantly increasing the number of parameters, but with significantly less cost.</li>
<li><b>Prediction Heads:</b> Classifying with cell partitions (quadtrees) instead of administrative regions leads to higher performance. Hybrid classification-then-regression performs best.</li>
<li><b>Finetuning:</b> While full finetuning gives the best performance, unfreezing the last transformer block is both more efficient and faster to train than using LoRA, suggesting that the pretrained models can extract relevant early features: only the way of combining them is what needs to be adapted for geolocation.</li>
<li><b>Contrastive:</b> Using regions to define the positive pairs in the contrastive loss outperforms text/image contrastive approaches.</li>
</ul>
</div>

<h2 style="margin-top: 1em;">Cite Us</h2>
<pre><code class="language-bibtex">
  @article{osv-5m,
    title = {OpenStreetView-5M: The Many Roads to Global Visual Geolocation},
    author = {Astruc, Guillaume and Dufour, Nicolas and Siglidis, Ioannis
      and Aronssohn, Constantin and Bouia, Nacim and Fu, Stephanie and Loiseau, Romain
      and Nguyen, Van Nguyen and Raude, Charles and Vincent, Elliot and Xu, Lintao
      and Zhou, Hongyu and Landrieu, Loic},
    journal = {CVPR},
    year = {2024},
  }</code><button class="copy-code-button"><i class="fa-regular fa-clone"></i></button>
</pre>

<h2 style="margin-top: 1em;">Acknowledgments</h2>
<p>
<div class="text">
OSV-5M was made possible through the generous support of the Mapillary team, which helped us navigate their vast street view image database. Our work was supported by the ANR project READY3D ANR-19-CE23-0007, and the HPC resources of IDRIS under the allocation AD011014719 made by GENCI. We thank Valérie Gouet for her valuable feedback and Ségolène Albouy for helping us make gradio-folium clickable <b>(!)</b>.
</div>
</p>

<!-- <h4>Font stolen from Gwern.</h4> -->
<script>
  // Add click event listener to each copy code button
  document.querySelectorAll(".copy-code-button").forEach(function(button) {
    button.addEventListener("click", function() {
      // Get the code element
      var codeElement = this.parentElement.querySelector("code");
 
      // Create a temporary textarea to copy the code
      var textarea = document.createElement("textarea");
      textarea.value = codeElement.innerText;
      document.body.appendChild(textarea);
 
      // Select and copy the code
      textarea.select();
      document.execCommand("copy");
 
      // Remove the temporary textarea
      document.body.removeChild(textarea);
 
      // Change the button text to "Copied!" for a short duration
      var originalText = this.innerText;
      this.innerText = "Copied!";
      setTimeout(function() {
        button.innerHTML = "<i class=\"fa-regular fa-clone\"></i>";
      }, 1500);
    });
  });
</script>
</body>
</html>
